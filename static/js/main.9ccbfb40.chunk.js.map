{"version":3,"sources":["firebase.js","getData.js","corazon.svg","App.jsx","index.js"],"names":["app","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","db","getFirestore","auth","getAuth","provider","GoogleAuthProvider","loginConGoogle","signInWithPopup","logout","signOut","post","a","addDoc","collection","console","error","id","deleteDoc","doc","log","updatePost","newData","userRef","updateDoc","INITIAL_FORM_DATA","message","email","uid","autor","App","useState","posts","setPosts","newPost","setNewPost","userLog","setUserLog","useEffect","unsub","onSnapshot","snapshot","postsData","docs","map","data","likes","unsubscribeAuth","onAuthStateChanged","user","handlerDelete","e","delPost","target","then","newPosts","filter","className","src","photoURL","alt","displayName","onClick","onSubmit","preventDefault","addPost","rows","cols","onChange","value","type","placeholder","likeUser","height","corazon","rootElement","document","getElementById","ReactDOM","render"],"mappings":"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","file":"static/js/main.9ccbfb40.chunk.js","sourcesContent":["import { initializeApp } from \"firebase/app\";\r\n\r\nconst firebaseConfig = {\r\n  apiKey: \"AIzaSyB0AYIB2bsOkvhmmWGoFZKOJb0dLrjcZlg\",\r\n  authDomain: \"proyecto-447b2.firebaseapp.com\",\r\n  projectId: \"proyecto-447b2\",\r\n  storageBucket: \"proyecto-447b2.appspot.com\",\r\n  messagingSenderId: \"57226506320\",\r\n  appId: \"1:57226506320:web:7d6de59d685a856679a155\",\r\n  measurementId: \"G-WTFG74PJ0N\"\r\n};\r\n\r\n// Initialize Firebase\r\nexport const app = initializeApp(firebaseConfig);\r\n","import {\r\n  getFirestore,\r\n  collection,\r\n  getDocs,\r\n  addDoc,\r\n  deleteDoc,\r\n  doc,\r\n  updateDoc\r\n} from \"firebase/firestore/\";\r\nimport { app } from \"./firebase\";\r\nimport {\r\n  getAuth,\r\n  signInWithPopup,\r\n  GoogleAuthProvider,\r\n  signOut\r\n} from \"firebase/auth\";\r\n\r\nexport const db = getFirestore(app);\r\n\r\n//Autenticación\r\nexport const auth = getAuth();\r\nexport const provider = new GoogleAuthProvider();\r\nexport const loginConGoogle = () => signInWithPopup(auth, provider);\r\nexport const logout = () => signOut(auth);\r\n\r\n// export async function getUsers() {\r\n//   const usersCol = collection(db, \"posts\");\r\n//   const usersSnapshot = await getDocs(usersCol);\r\n//   const usersList = usersSnapshot.docs.map((doc) => {\r\n//     return {\r\n//       ...doc.data(),\r\n//       id: doc.id\r\n//     };\r\n//   });\r\n//   return usersList;\r\n// }\r\n\r\nexport async function addPost(post) {\r\n  try {\r\n    await addDoc(collection(db, \"posts\"), post);\r\n  } catch (e) {\r\n    console.error(\"Error adding document: \", e);\r\n    //throw new Error(\"Error en addUser\");\r\n  }\r\n}\r\n\r\nexport async function delPost(id) {\r\n  try {\r\n    await deleteDoc(doc(db, \"posts\", id));\r\n    return id;\r\n  } catch (e) {\r\n    console.log(\"Error al borrar el post\", e);\r\n  }\r\n}\r\n\r\nexport async function updatePost(id, newData) {\r\n  const userRef = doc(db, \"posts\", id);\r\n  try {\r\n    await updateDoc(userRef, newData);\r\n  } catch (e) {\r\n    console.log(\"Error al actualizar el post\", e);\r\n  }\r\n}\r\n","export default __webpack_public_path__ + \"static/media/corazon.dbb80d69.svg\";","import { useEffect, useState } from \"react\";\nimport {\n  addPost,\n  db,\n  delPost,\n  updatePost,\n  auth,\n  loginConGoogle,\n  logout\n} from \"./getData\";\nimport \"./styles.css\";\nimport corazon from \"./corazon.svg\";\nimport { collection, onSnapshot } from \"firebase/firestore\";\n\nconst INITIAL_FORM_DATA = {\n  message: \"\",\n  email: \"\",\n  uid: \"\",\n  autor: \"\"\n};\nexport default function App() {\n  const [posts, setPosts] = useState([]);\n  const [newPost, setNewPost] = useState(INITIAL_FORM_DATA);\n  const [userLog, setUserLog] = useState(null);\n\n  useEffect(() => {\n    const unsub = onSnapshot(collection(db, \"posts\"), (snapshot) => {\n      const postsData = snapshot.docs.map(\n        (doc) => {\n          return {\n            message: doc.data().message,\n            id: doc.id,\n            likes: doc.data().likes,\n            autor: doc.data().autor,\n            email: doc.data().email,\n            uid: doc.data().uid\n          };\n        },\n        (error) => {\n          console.log(error, \"error de escucha\");\n        }\n      );\n      //console.log(postsData);\n      setPosts(postsData);\n    });\n    const unsubscribeAuth = auth.onAuthStateChanged((user) => {\n      setUserLog(user);\n      //console.log(user);\n    });\n    return () => {\n      unsub();\n      unsubscribeAuth();\n    };\n  }, []);\n\n  const handleChange = (e) => {\n    setNewPost(() => {\n      return {\n        message: e.target.value,\n        email: userLog.email,\n        uid: userLog.uid,\n        autor: userLog.displayName\n      };\n    });\n  };\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    addPost(newPost).then(() => {\n      setNewPost(INITIAL_FORM_DATA);\n    });\n  };\n\n  const handlerDelete = (e) => {\n    delPost(e.target.id).then((id) => {\n      const newPosts = posts.filter((post) => {\n        return post.id !== id;\n      });\n      setPosts(newPosts);\n    });\n  };\n\n  const likeUser = (id, likes = 0) => {\n    // if (!likes) likes = 0;\n    updatePost(id, {\n      likes: likes + 1\n    });\n  };\n\n  return (\n    <div className=\"App\">\n      {userLog ? (\n        <div className=\"user-profile\">\n          <img className=\"user-profile-pic\" src={userLog.photoURL} alt=\"\" />\n          <p>¡Hola {userLog.displayName}!</p>\n          <button onClick={logout}>Log out</button>\n        </div>\n      ) : (\n        <button className=\"login-btn\" onClick={loginConGoogle}>\n          Login con Google\n        </button>\n      )}\n      <h1>Hola Usuarios</h1>\n      <form onSubmit={handleSubmit}>\n        <textarea\n          rows=\"4\"\n          cols=\"30\"\n          className=\"itemInput\"\n          onChange={handleChange}\n          type=\"text\"\n          placeholder=\"Message here...\"\n          value={newPost.message}\n        />\n\n        <br />\n        <button>Enviar</button>\n      </form>\n      <div className=\"posts\">\n        {posts.map((post) => {\n          return (\n            <div className=\"post\" key={post.id}>\n              <div className=\"userMessage\">\n                <h3>{post.message}</h3>\n                <p>{post.autor}</p>\n                <p>{post.email}</p>\n                <p>{post.uid}</p>\n              </div>\n              <div>\n                {post.uid === userLog?.uid ? (\n                  <button\n                    id={post.id}\n                    onClick={handlerDelete}\n                    className=\"delete actionBtn\"\n                  >\n                    Eliminar\n                  </button>\n                ) : null}\n\n                <button\n                  className=\"actionBtn\"\n                  onClick={() => likeUser(post.id, post.likes)}\n                >\n                  <img height=\"13px\" src={corazon} alt=\"\" />\n                  <span>{post.likes ? post.likes : 0}</span>\n                </button>\n              </div>\n            </div>\n          );\n        })}\n      </div>\n    </div>\n  );\n}\n","import { StrictMode } from \"react\";\nimport ReactDOM from \"react-dom\";\n\nimport App from \"./App\";\n\nconst rootElement = document.getElementById(\"root\");\nReactDOM.render(\n  <StrictMode>\n    <App />\n  </StrictMode>,\n  rootElement\n);\n"],"sourceRoot":""}